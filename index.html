<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Flurimo ‚Äî –ú–∞–≥–∞–∑–∏–Ω</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: Arial, sans-serif; margin: 0; background: #faf9f7; }
header { padding: 16px; text-align: center; font-size: 22px; font-weight: 600; position: relative; }
.cart-button { position: absolute; right: 16px; top: 12px; font-size: 20px; cursor: pointer; }
.card { background: #fff; margin: 12px; border-radius: 14px; overflow: hidden; box-shadow: 0 2px 6px rgba(0,0,0,.05); }
.card img { width: 100%; height: 240px; object-fit: cover; }
.card-content { padding: 14px; }
.price { font-weight: bold; margin: 8px 0; }
.status { font-size: 13px; opacity: .6; margin-bottom: 10px; }
button { width: 100%; padding: 12px; background: #000; color: #fff; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; }
button:disabled { background: #ccc; cursor: not-allowed; }
#cart { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,.7); overflow-y: auto; padding-top: 60px; }
#cart-content { background: #fff; margin: auto; padding: 20px; border-radius: 14px; max-width: 500px; }
.cart-item { display: flex; justify-content: space-between; margin-bottom: 10px; }
.cart-item span { margin: 0 5px; }
input { width: 100%; padding: 10px; margin-bottom: 10px; font-size: 14px; border-radius: 6px; border: 1px solid #ccc; }
</style>
</head>
<body>

<header>
  üå∏ Flurimo
  <span class="cart-button" onclick="toggleCart()">üõí <span id="cart-count">0</span></span>
</header>

<div id="catalog"></div>

<!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
<div id="cart">
  <div id="cart-content">
    <h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
    <div id="cart-items"></div>
    <div style="margin-top: 10px; font-weight:bold;">–ò—Ç–æ–≥–æ: <span id="cart-total">0</span> ‚ÇΩ</div>
    <input id="customerName" placeholder="–í–∞—à–µ –∏–º—è">
    <input id="customerPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
    <button onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    <button style="margin-top: 10px; background:#ccc;color:#000;" onclick="toggleCart()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
/* üîó –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–≤–æ–π –Ω–æ–≤—ã–π URL Web App –ø–æ—Å–ª–µ redeploy */
const GOOGLE_SHEET_URL = "https://script.google.com/macros/s/AKfycbw-XmuqnicoldFbJ1NZPCfs5eA4UVIs_FBO_kpBMvSitORhkZdy4dJ1tgIC7GslWwZ3YA/exec";

/* üõç –¢–û–í–ê–†–´ */
const products = [
  { name: "–¢—é–ª—å–ø–∞–Ω—ã", description: "–û—Ö–∞–ø–∫–∞ —Ç—é–ª—å–ø–∞–Ω–æ–≤ 50 —à—Ç—É–∫", price: 7000, quantity: 50, image: "images/tulip.jpg" },
  { name: "–ì–≤–æ–∑–¥–∏–∫–∞ –∫—É—Å—Ç–æ–≤–∞—è —Ä–æ–∑–æ–≤–∞—è", description: "–û—Ö–∞–ø–∫–∞ —Ä–æ–∑–æ–≤–æ–π –∫—É—Å—Ç–æ–≤–æ–π –≥–≤–æ–∑–¥–∏–∫–∏ 20 —à—Ç—É–∫", price: 2000, quantity: 20, image: "images/carnation.jpg" },
  { name: "–ì–≤–æ–∑–¥–∏–∫–∞ –ì—Ä–∏–Ω –¢—Ä–∏–∫", description: "–û—Ö–∞–ø–∫–∞ –≥–≤–æ–∑–¥–∏–∫–∏ –ì—Ä–∏–Ω –¢—Ä–∏–∫", price: 2200, quantity: 10, image: "images/greentrick.jpg" }
];

let cart = [];

/* üß± –ö–ê–†–¢–û–ß–ö–ò –¢–û–í–ê–†–û–í */
const catalog = document.getElementById("catalog");
products.forEach(p => {
  const disabled = p.quantity <= 0;
  const card = document.createElement("div");
  card.className = "card";
  card.innerHTML = `
    <img src="${p.image}">
    <div class="card-content">
      <h3>${p.name}</h3>
      <p>${p.description}</p>
      <div class="status">${disabled ? "–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏" : "–í –Ω–∞–ª–∏—á–∏–∏: " + p.quantity}</div>
      <div class="price">${p.price} ‚ÇΩ</div>
      <button ${disabled ? "disabled" : ""} onclick="addToCart({name:'${p.name}', price:${p.price}})">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>
  `;
  catalog.appendChild(card);
});

/* üõí –ö–û–†–ó–ò–ù–ê */
function toggleCart() {
  const cartDiv = document.getElementById("cart");
  cartDiv.style.display = cartDiv.style.display === "block" ? "none" : "block";
  renderCart();
}

function addToCart(item) {
  const existing = cart.find(i => i.name === item.name);
  if (existing) existing.quantity += 1;
  else cart.push({...item, quantity:1});
  updateCartCount();
}

function removeFromCart(name) {
  cart = cart.filter(i => i.name !== name);
  updateCartCount();
  renderCart();
}

function changeQuantity(name, delta) {
  const item = cart.find(i => i.name === name);
  if (!item) return;
  item.quantity += delta;
  if (item.quantity <= 0) removeFromCart(name);
  renderCart();
  updateCartCount();
}

function updateCartCount() {
  const count = cart.reduce((sum,i)=>sum+i.quantity,0);
  document.getElementById("cart-count").innerText = count;
}

function renderCart() {
  const container = document.getElementById("cart-items");
  container.innerHTML = "";
  let total = 0;
  cart.forEach(i => {
    total += i.price * i.quantity;
    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `
      ${i.name} x${i.quantity} - ${i.price*i.quantity} ‚ÇΩ
      <span>
        <button onclick="changeQuantity('${i.name}',-1)">-</button>
        <button onclick="changeQuantity('${i.name}',1)">+</button>
        <button onclick="removeFromCart('${i.name}')">‚ùå</button>
      </span>
    `;
    container.appendChild(div);
  });
  document.getElementById("cart-total").innerText = total;
}

/* üì§ –û–§–û–†–ú–õ–ï–ù–ò–ï –ó–ê–ö–ê–ó–ê */
function checkout() {
  if(cart.length===0){ alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞"); return; }
  const name = document.getElementById("customerName").value;
  const phone = document.getElementById("customerPhone").value;
  if(!name || !phone){ alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω"); return; }

  fetch(GOOGLE_SHEET_URL, {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      customer_name: name,
      customer_phone: phone,
      order: cart
    })
  }).then(()=>{
    alert("‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
    cart = [];
    updateCartCount();
    toggleCart();
    document.getElementById("customerName").value = "";
    document.getElementById("customerPhone").value = "";
  }).catch(()=>{
    alert("‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏");
  });
}
</script>

</body>
</html>







