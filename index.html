<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Flurimo ‚Äî –ú–∞–≥–∞–∑–∏–Ω</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body { font-family: Arial, sans-serif; margin: 0; background: #faf9f7; }
header { padding: 16px; text-align: center; font-size: 22px; font-weight: 600; }
.card { background: #fff; margin: 12px; border-radius: 14px; overflow: hidden; box-shadow: 0 2px 6px rgba(0,0,0,.05); }
.card img { width: 100%; height: 240px; object-fit: cover; }
.card-content { padding: 14px; }
.price { font-weight: bold; margin: 8px 0; }
.status { font-size: 13px; opacity: .6; margin-bottom: 10px; }
button { width: 100%; padding: 12px; background: #000; color: #fff; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; }
button:disabled { background: #ccc; cursor: not-allowed; }

/* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞ */
#cartBox {
  position: fixed;
  top: 80px;
  right: 10px;
  width: 260px;
  background: #fff;
  padding: 14px;
  border-radius: 14px;
  box-shadow: 0 2px 6px rgba(0,0,0,.05);
  display: none;
  z-index: 1000;
}
#cartBox h3 { margin-top: 0; }
#cartList { list-style: none; padding: 0; margin: 0 0 10px 0; max-height: 300px; overflow-y: auto; }

#orderBox { display:none; margin-top:12px; padding:14px; background:#fff; border-radius:14px; box-shadow:0 2px 6px rgba(0,0,0,.05);}
input { width: 100%; padding: 10px; margin-bottom: 10px; font-size: 14px; border-radius: 6px; border: 1px solid #ccc; }
</style>
</head>
<body>
<header>üå∏ Flurimo</header>

<div id="catalog"></div>

<div id="cartBox">
  <h3>–ö–æ—Ä–∑–∏–Ω–∞ üõí</h3>
  <ul id="cartList"></ul>
  <button onclick="openOrderForm()">–û—Ñ–æ—Ä–º–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
</div>

<div id="orderBox">
  <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
  <input id="customerName" placeholder="–í–∞—à–µ –∏–º—è">
  <input id="customerPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
  <button onclick="sendOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<script>
/* üîó –°—é–¥–∞ –≤—Å—Ç–∞–≤—å —Å–≤–æ—é —Å—Å—ã–ª–∫—É Web App —Å doGet */
const GOOGLE_SHEET_URL = "https://script.google.com/macros/s/AKfycbwXpJHTIoEBvjtUkH0lK5pqvhfpMAKWHopgNbYRYrAPTmC3y4u53vIZ-N6hDYCVcCBVoA/exec";

/* üõç –¢–æ–≤–∞—Ä—ã */
const products = [
  {name:"–¢—é–ª—å–ø–∞–Ω—ã –ö—Ä–∞—Å–Ω—ã–µ", description:"–û—Ö–∞–ø–∫–∞ 50 —à—Ç", price:7000, quantity:50, image:"images/tulipred.jpg"},
{name:"–¢—é–ª—å–ø–∞–Ω—ã –ü–∏–æ–Ω–æ–≤–∏–¥–Ω—ã–µ", description:"–û—Ö–∞–ø–∫–∞ 50 —à—Ç", price:7000, quantity:50, image:"images/tulipp.jpg"},
{name:"–¢—é–ª—å–ø–∞–Ω—ã –ë–µ–ª—ã–µ", description:"–û—Ö–∞–ø–∫–∞ 50 —à—Ç", price:8000, quantity:50, image:"images/tulipb.jpg"},
{name:"–¢—é–ª—å–ø–∞–Ω—ã –ö–æ–ª–∞–º–±—É—Å", description:"–û—Ö–∞–ø–∫–∞ 50 —à—Ç", price:7000, quantity:50, image:"images/tulipk.jpg"},
{name:"–¢—é–ª—å–ø–∞–Ω—ã –†–æ–∑–æ–≤—ã–µ", description:"–û—Ö–∞–ø–∫–∞ 50 —à—Ç", price:9000, quantity:50, image:"images/tulipr.jpg"},
{name:"–¢—é–ª—å–ø–∞–Ω—ã –°–∏—Ä–µ–Ω–µ–≤—ã–µ", description:"–û—Ö–∞–ø–∫–∞ 50 —à—Ç", price:10000, quantity:50, image:"images/tulips.jpg"},
{name:"–†–æ–∑–∞ –∫—É—Å—Ç–æ–≤–∞—è –°–∏–ª—å–≤–∞ –ü–∏–Ω–∫", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:6500, quantity:10, image:"images/rosesp.jpg"},
{name:"–†–æ–∑–∞ –∫—É—Å—Ç–æ–≤–∞—è –ë–æ–º–±–∞—Å—Ç–∏–∫", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:4000, quantity:10, image:"images/roseb.jpg"},
{name:"–†–æ–∑–∞ –∫—É—Å—Ç–æ–≤–∞—è –ú–∏—Å—Ç–∏ –±–∞–±–ª–∑", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:4000, quantity:10, image:"images/rosem.jpg"},
{name:"–†–æ–∑–∞ –ú–æ–Ω–¥–∏–∞–ª—å", description:"–û—Ö–∞–ø–∫–∞ 20 —à—Ç", price:5000, quantity:20, image:"images/rosemon.jpg"},
{name:"–†–æ–∑–∞ –ü–∏–Ω–∫ –æ—Ö–∞—Ä–∞", description:"–û—Ö–∞–ø–∫–∞ 15 —à—Ç", price:6500, quantity:15, image:"images/rosepx.jpg"},
{name:"–†–æ–∑–∞ –ö–∞–Ω—Ç—Ä–∏ –±–ª—é", description:"–û—Ö–∞–ø–∫–∞ 20 —à—Ç", price:8500, quantity:20, image:"images/rosekb.jpg"},
{name:"–†–æ–∑–∞ –ü–∏–Ω–∫ –§–ª–æ–π–¥", description:"–û—Ö–∞–ø–∫–∞ 20 —à—Ç", price:5000, quantity:20, image:"images/rosepf.jpg"},
{name:"–†–æ–∑–∞ –í–∞–π—Ç –æ—Ö–∞—Ä–∞", description:"–û—Ö–∞–ø–∫–∞ 15 —à—Ç", price:6500, quantity:15, image:"images/rosevx.jpg"},
{name:"–ì–≤–æ–∑–¥–∏–∫–∞ –∫—É—Å—Ç–æ–≤–∞—è —Ä–æ–∑–æ–≤–∞—è", description:"–û—Ö–∞–ø–∫–∞ 20 —à—Ç", price:2000, quantity:20, image:"images/carnation.jpg"},
{name:"–ì–≤–æ–∑–¥–∏–∫–∞ –ì—Ä–∏–Ω –¢—Ä–∏–∫", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:2200, quantity:10, image:"images/greentrick.jpg"},
{name:"–ì–≤–æ–∑–¥–∏–∫–∞ –±–µ–ª–∞—è", description:"–û—Ö–∞–ø–∫–∞ 20 —à—Ç", price:3000, quantity:20, image:"images/carnationw.jpg"},
{name:"–≠—É—Å—Ç–æ–º–∞ –±–µ–ª–∞—è", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:3800, quantity:10, image:"images/carnationyst.jpg"},
{name:"–§—Ä–µ–Ω–∑–∏—è –±–µ–ª–∞—è", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:2500, quantity:10, image:"images/carnationfrb.jpg"},
{name:"–ì–æ—Ä—Ç–µ–Ω–∑–∏—è –í–∞–π—Ç –ø—Ä–µ–º–∏—É–º", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:5000, quantity:10, image:"images/gortenzv.jpg"},
{name:"–†–∞–Ω—É–Ω–∫—É–ª—é—Å—ã –±–µ–ª—ã–µ", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:5000, quantity:10, image:"images/ranynb.jpg"},
{name:"–†–∞–Ω—É–Ω–∫—É–ª—é—Å—ã —Ä–æ–∑–æ–≤—ã–µ", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:5000, quantity:10, image:"images/ranynr.jpg"},
{name:"–†–∞–Ω—É–Ω–∫—É–ª—é—Å—ã —Ö–∞–Ω–æ–π", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:5000, quantity:10, image:"images/ranynx.jpg"},
{name:"–•—Ä–∏–∑–∞–Ω—Ç–µ–º–∞ –ë–∏–≥—É–¥–∏", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:5000, quantity:10, image:"images/xrizb.jpg"},
{name:"–ò–ª–µ–∫—Å", description:"–û—Ö–∞–ø–∫–∞ 5 —à—Ç", price:2800, quantity:5, image:"images/ilex.jpg"},
{name:"–ù–æ–±–∏–ª–∏—Å", description:"–û—Ö–∞–ø–∫–∞ 1 —à—Ç", price:2500, quantity:1, image:"images/nobilis.jpg"}
];

let cart = [];
const catalog = document.getElementById("catalog");

/* –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ */
products.forEach(p => {
  const card = document.createElement("div");
  card.className = "card";
  const disabled = p.quantity <= 0;
  card.innerHTML = `
    <img src="${p.image}" alt="${p.name}">
    <div class="card-content">
      <h3>${p.name}</h3>
      <p>${p.description}</p>
      <div class="status">${disabled ? "–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏" : "–í –Ω–∞–ª–∏—á–∏–∏: "+p.quantity}</div>
      <div class="price">${p.price} ‚ÇΩ</div>
      <button ${disabled ? "disabled" : ""} onclick="addToCart('${p.name}',${p.price},1)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>
  `;
  catalog.appendChild(card);
});

/* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É */
function addToCart(name, price, quantity){
  const existing = cart.find(i => i.name === name);
  if(existing) existing.quantity += quantity;
  else cart.push({name, price, quantity});
  updateCartDisplay();
}

/* –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ–π –∫–æ—Ä–∑–∏–Ω—ã */
function updateCartDisplay(){
  const cartBox = document.getElementById("cartBox");
  const cartList = document.getElementById("cartList");
  cartList.innerHTML = "";
  if(cart.length === 0){
    cartBox.style.display = "none";
    return;
  }
  cartBox.style.display = "block";
  cart.forEach(item=>{
    const li = document.createElement("li");
    li.textContent = `${item.name} ‚Äî ${item.price} ‚ÇΩ √ó ${item.quantity}`;
    cartList.appendChild(li);
  });
}

/* –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è */
function openOrderForm(){
  document.getElementById("orderBox").style.display = "block";
  window.scrollTo(0, document.body.scrollHeight);
}

/* –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ doGet */
function sendOrder(){
  const customerName = document.getElementById("customerName").value;
  const customerPhone = document.getElementById("customerPhone").value;

  if(!customerName || !customerPhone){
    alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω");
    return;
  }

  cart.forEach(item => {
    const url = `${GOOGLE_SHEET_URL}?name=${encodeURIComponent(item.name)}&price=${item.price}&quantity=${item.quantity}&customer_name=${encodeURIComponent(customerName)}&customer_phone=${encodeURIComponent(customerPhone)}`;
    fetch(url)
      .then(res => res.json())
      .then(()=>console.log("–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!"))
      .catch(()=>alert("‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏"));
  });

  alert("‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
  cart = [];
  updateCartDisplay();
  document.getElementById("orderBox").style.display = "none";
  document.getElementById("customerName").value = "";
  document.getElementById("customerPhone").value = "";
}
</script>
</body>
</html>














