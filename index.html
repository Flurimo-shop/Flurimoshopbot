<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Flurimo ‚Äî –ú–∞–≥–∞–∑–∏–Ω</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body { font-family: Arial, sans-serif; margin: 0; background: #faf9f7; }
header { padding: 16px; text-align: center; font-size: 22px; font-weight: 600; }
.card { background: #fff; margin: 12px; border-radius: 14px; overflow: hidden; box-shadow: 0 2px 6px rgba(0,0,0,.05); }
.card img { width: 100%; height: 240px; object-fit: cover; }
.card-content { padding: 14px; }
.price { font-weight: bold; margin: 8px 0; }
.status { font-size: 13px; opacity: .6; margin-bottom: 10px; }
button { width: 100%; padding: 12px; background: #000; color: #fff; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; }
button:disabled { background: #ccc; cursor: not-allowed; }

/* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞ */
#cartBox {
  position: fixed;
  top: 80px;
  right: 10px;
  width: 260px;
  background: #fff;
  padding: 14px;
  border-radius: 14px;
  box-shadow: 0 2px 6px rgba(0,0,0,.05);
  display: none;
  z-index: 1000;
}
#cartBox h3 { margin-top: 0; }
#cartList { list-style: none; padding: 0; margin: 0 0 10px 0; max-height: 300px; overflow-y: auto; }

#orderBox { display:none; margin-top:12px; padding:14px; background:#fff; border-radius:14px; box-shadow:0 2px 6px rgba(0,0,0,.05);}
input { width: 100%; padding: 10px; margin-bottom: 10px; font-size: 14px; border-radius: 6px; border: 1px solid #ccc; }
</style>
</head>
<body>
<header>üå∏ Flurimo</header>

<div id="catalog"></div>

<div id="cartBox">
  <h3>–ö–æ—Ä–∑–∏–Ω–∞ üõí</h3>
  <ul id="cartList"></ul>
  <button onclick="openOrderForm()">–û—Ñ–æ—Ä–º–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
</div>

<div id="orderBox">
  <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
  <input id="customerName" placeholder="–í–∞—à–µ –∏–º—è">
  <input id="customerPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
  <button onclick="sendOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<script>
/* üîó –°—é–¥–∞ –≤—Å—Ç–∞–≤—å —Å–≤–æ—é —Å—Å—ã–ª–∫—É Web App —Å doGet */
const GOOGLE_SHEET_URL = "https://script.google.com/macros/s/AKfycbwXpJHTIoEBvjtUkH0lK5pqvhfpMAKWHopgNbYRYrAPTmC3y4u53vIZ-N6hDYCVcCBVoA/exec";

/* üõç –¢–æ–≤–∞—Ä—ã */
const products = [
  {name:"–¢—é–ª—å–ø–∞–Ω—ã", description:"–û—Ö–∞–ø–∫–∞ 50 —à—Ç", price:7000, quantity:50, image:"images/tulip.jpg"},
  {name:"–ì–≤–æ–∑–¥–∏–∫–∞ –∫—É—Å—Ç–æ–≤–∞—è —Ä–æ–∑–æ–≤–∞—è", description:"–û—Ö–∞–ø–∫–∞ 20 —à—Ç", price:2000, quantity:20, image:"images/carnation.jpg"},
  {name:"–ì–≤–æ–∑–¥–∏–∫–∞ –ì—Ä–∏–Ω –¢—Ä–∏–∫", description:"–û—Ö–∞–ø–∫–∞ 10 —à—Ç", price:2200, quantity:10, image:"images/greentrick.jpg"}
];

let cart = [];
const catalog = document.getElementById("catalog");

/* –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ */
products.forEach(p => {
  const card = document.createElement("div");
  card.className = "card";
  const disabled = p.quantity <= 0;
  card.innerHTML = `
    <img src="${p.image}" alt="${p.name}">
    <div class="card-content">
      <h3>${p.name}</h3>
      <p>${p.description}</p>
      <div class="status">${disabled ? "–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏" : "–í –Ω–∞–ª–∏—á–∏–∏: "+p.quantity}</div>
      <div class="price">${p.price} ‚ÇΩ</div>
      <button ${disabled ? "disabled" : ""} onclick="addToCart('${p.name}',${p.price},1)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>
  `;
  catalog.appendChild(card);
});

/* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É */
function addToCart(name, price, quantity){
  const existing = cart.find(i => i.name === name);
  if(existing) existing.quantity += quantity;
  else cart.push({name, price, quantity});
  updateCartDisplay();
}

/* –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ–π –∫–æ—Ä–∑–∏–Ω—ã */
function updateCartDisplay(){
  const cartBox = document.getElementById("cartBox");
  const cartList = document.getElementById("cartList");
  cartList.innerHTML = "";
  if(cart.length === 0){
    cartBox.style.display = "none";
    return;
  }
  cartBox.style.display = "block";
  cart.forEach(item=>{
    const li = document.createElement("li");
    li.textContent = `${item.name} ‚Äî ${item.price} ‚ÇΩ √ó ${item.quantity}`;
    cartList.appendChild(li);
  });
}

/* –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è */
function openOrderForm(){
  document.getElementById("orderBox").style.display = "block";
  window.scrollTo(0, document.body.scrollHeight);
}

/* –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ doGet */
function sendOrder(){
  const customerName = document.getElementById("customerName").value;
  const customerPhone = document.getElementById("customerPhone").value;

  if(!customerName || !customerPhone){
    alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω");
    return;
  }

  cart.forEach(item => {
    const url = `${GOOGLE_SHEET_URL}?name=${encodeURIComponent(item.name)}&price=${item.price}&quantity=${item.quantity}&customer_name=${encodeURIComponent(customerName)}&customer_phone=${encodeURIComponent(customerPhone)}`;
    fetch(url)
      .then(res => res.json())
      .then(()=>console.log("–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!"))
      .catch(()=>alert("‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏"));
  });

  alert("‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
  cart = [];
  updateCartDisplay();
  document.getElementById("orderBox").style.display = "none";
  document.getElementById("customerName").value = "";
  document.getElementById("customerPhone").value = "";
}
</script>
</body>
</html>










